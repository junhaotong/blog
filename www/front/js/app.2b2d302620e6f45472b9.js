webpackJsonp([1],{"+nuC":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"layout",attrs:{type:"flex"}},[a("div",{staticClass:"menu-left"},[a("div",{staticClass:"logo"},[t._v("Jeremy")]),t._v(" "),a("Menu",{attrs:{theme:"dark",width:"auto","active-name":t.$route.path,"open-names":[t.$route.matched[0].path]},on:{"on-select":t.changeLeftMenu}},t._l(t.$router.options.routes,function(e,n){return e.hidden?t._e():a("Submenu",{key:e.path,attrs:{name:e.path}},[a("template",{slot:"title"},[a("Icon",{staticClass:"menu-icon",attrs:{type:e.icon}}),t._v(" "),a("span",{staticClass:"menu-text"},[t._v(t._s(e.name))])],1),t._v(" "),t._l(e.children,function(n){return n.hidden?t._e():a("Menu-item",{key:n.path,attrs:{name:e.path+"/"+n.path}},[a("Icon",{staticClass:"menu-icon",attrs:{type:n.icon}}),t._v(" "),a("span",{staticClass:"menu-text"},[t._v(t._s(n.name))])],1)})],2)}))],1),t._v(" "),a("div",{staticClass:"content-right"},[a("div",{staticClass:"layout-ceiling"},[a("a",{staticClass:"cailing-item",attrs:{href:"javascript:void(0)"}},[t._v("管理后台")]),t._v(" "),a("Dropdown",{staticClass:"cailing-item pull-right",attrs:{trigger:"click"}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                    "+t._s(t.$store.state.userinfo.userinfo.username)+"\n                    "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),a("Dropdown-menu",{slot:"list"},[a("Dropdown-item",[a("span",{on:{click:t.logout}},[t._v("退出登录")])])],1)],1)],1),t._v(" "),a("div",{staticClass:"main"},[a("Breadcrumb",{staticClass:"bread"},[a("Breadcrumb-item",{attrs:{href:"/"}},[t._v("首页")]),t._v(" "),t.$route.matched[0]?a("Breadcrumb-item",{attrs:{href:t.$route.matched[0].path}},[t._v(t._s(t.$route.matched[0].name))]):t._e(),t._v(" "),t.$route.matched[1]?a("Breadcrumb-item",[t._v(t._s(t.$route.matched[1].name))]):t._e()],1),t._v(" "),a("div",{staticClass:"content"},[a("router-view")],1)],1)])])},r=[],s={render:n,staticRenderFns:r};e.a=s},"0keg":function(t,e,a){"use strict";var n=a("2Giq");e.a=n.a},"1nw8":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("Table",{staticClass:"user-list",attrs:{border:"",columns:t.columns,data:t.data}})},r=[],s={render:n,staticRenderFns:r};e.a=s},"2Giq":function(t,e,a){"use strict";function n(t){a("Nu8K")}var r=a("SH3H"),s=a("1nw8"),o=a("VU/8"),i=n,c=o(r.a,s.a,i,null,null);e.a=c.exports},"9ixZ":function(t,e,a){"use strict";var n=a("miib");e.a=n.a},Aggl:function(t,e,a){"use strict";var n=a("TB72"),r=a("bGai");e.a=[{path:"/user",name:"用户管理",icon:"android-person",redirect:"/user/add",component:function(t){t(r.a.Content)},children:[{path:"add",name:"添加用户",icon:"plus-round",component:n.a.User.Add},{path:"list",name:"用户列表",icon:"list",component:n.a.User.List}]}]},C9O2:function(t,e,a){"use strict";var n=a("pFYg"),r=a.n(n);!function(t){function e(t){this._obj=t}function a(t){var a=this;new e(t)._each(function(t,e){a[t]=e})}if(void 0===t)throw new Error("Geetest requires browser environment");var n=t.document,s=t.Math,o=n.getElementsByTagName("head")[0];e.prototype={_each:function(t){var e=this._obj;for(var a in e)e.hasOwnProperty(a)&&t(a,e[a]);return this}},a.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var t=this;return c(t.type)?t.fallback_config[t.type]:t.new_captcha?t.fallback_config.fullpage:t.fallback_config.slide},_extend:function(t){var a=this;new e(t)._each(function(t,e){a[t]=e})}};var i=function(t){return"number"==typeof t},c=function(t){return"string"==typeof t},u=function(t){return"boolean"==typeof t},l=function(t){return"object"===(void 0===t?"undefined":r()(t))&&null!==t},d=function(t){return"function"==typeof t},m={},p={},f=function(){return parseInt(1e4*s.random())+(new Date).valueOf()},g=function(t,e){var a=n.createElement("script");a.charset="UTF-8",a.async=!0,a.onerror=function(){e(!0)};var r=!1;a.onload=a.onreadystatechange=function(){r||a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(r=!0,setTimeout(function(){e(!1)},0))},a.src=t,o.appendChild(a)},v=function(t){return t.replace(/^https?:\/\/|\/$/g,"")},h=function(t){return t=t.replace(/\/+/g,"/"),0!==t.indexOf("/")&&(t="/"+t),t},_=function(t){if(!t)return"";var a="?";return new e(t)._each(function(t,e){(c(e)||i(e)||u(e))&&(a=a+encodeURIComponent(t)+"="+encodeURIComponent(e)+"&")}),"?"===a&&(a=""),a.replace(/&$/,"")},b=function(t,e,a,n){e=v(e);var r=h(a)+_(n);return e&&(r=t+e+r),r},w=function(t,e,a,n,r){!function s(o){var i=b(t,e[o],a,n);g(i,function(t){t?o>=e.length-1?r(!0):s(o+1):r(!1)})}(0)},y=function(e,a,n,r){if(l(n.getLib))return n._extend(n.getLib),void r(n);if(n.offline)return void r(n._get_fallback_config());var s="geetest_"+f();t[s]=function(e){r("success"==e.status?e.data:e.status?n._get_fallback_config():e),t[s]=void 0;try{delete t[s]}catch(t){}},w(n.protocol,e,a,{gt:n.gt,callback:s},function(t){t&&r(n._get_fallback_config())})},F=function(t,e){var a={networkError:"网络错误",gtTypeError:"gt字段不是字符串类型"};if("function"!=typeof e.onError)throw new Error(a[t]);e.onError(a[t])};(function(){return t.Geetest||n.getElementById("gt_lib")})()&&(p.slide="loaded"),t.initGeetest=function(e,n){var r=new a(e);e.https?r.protocol="https://":e.protocol||(r.protocol=t.location.protocol+"//"),"050cffef4ae57b5d5e529fea9540b0d1"!==e.gt&&"3bd38408ae4af923ed36e13819b14d42"!==e.gt||(r.apiserver="yumchina.geetest.com/",r.api_server="yumchina.geetest.com"),l(e.getType)&&r._extend(e.getType),y([r.api_server||r.apiserver],r.typePath,r,function(e){var a=e.type,s=function(){r._extend(e),n(new t.Geetest(r))};m[a]=m[a]||[];var o=p[a]||"init";"init"===o?(p[a]="loading",m[a].push(s),w(r.protocol,e.static_servers||e.domains,e[a]||e.path,null,function(t){if(t)p[a]="fail",F("networkError",r);else{p[a]="loaded";for(var e=m[a],n=0,s=e.length;n<s;n+=1){var o=e[n];d(o)&&o()}m[a]=[]}})):"loaded"===o?s():"fail"===o?F("networkError",r):"loading"===o&&m[a].push(s)})}}(window)},"Du/2":function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r});var n="LOGOUT",r="UPDATE_USERINFO"},EOfN:function(t,e,a){"use strict";function n(t){a("lcyz")}var r=a("UEXc"),s=a("+nuC"),o=a("VU/8"),i=n,c=o(r.a,s.a,i,"data-v-30205269",null);e.a=c.exports},FGk3:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",[a("Form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.rules}},[a("FormItem",{staticClass:"form-item",attrs:{prop:"username"}},[a("Input",{attrs:{placeholder:"用户名或邮箱"},model:{value:t.loginForm.username,callback:function(e){t.loginForm.username=e},expression:"loginForm.username"}}),t._v(" "),a("transition",{attrs:{name:"slide-fade"}},[t.usernameError?a("div",{staticClass:"hint"},[t._v(t._s(t.usernameError))]):t._e()])],1),t._v(" "),a("FormItem",{staticClass:"form-item",attrs:{prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.loginForm.password,callback:function(e){t.loginForm.password=e},expression:"loginForm.password"}}),t._v(" "),a("transition",{attrs:{name:"slide-fade"}},[t.passwordError?a("div",{staticClass:"hint"},[t._v(t._s(t.passwordError))]):t._e()])],1),t._v(" "),a("FormItem",[a("div",{attrs:{id:"captcha"}},[t.captchaStatus?[t._v("\n                    验证码加载中...\n                ")]:t._e()],2)]),t._v(" "),a("FormItem",{staticClass:"form-item"},[a("Button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)},r=[],s={render:n,staticRenderFns:r};e.a=s},"I/Af":function(t,e,a){"use strict";e.a={name:"UserAdd",data:function(){var t=this;return{UserForm:{avatar:"",username:"",email:"",pwd:"",re_pwd:""},rules:{username:{required:!0,message:"用户名不能为空",trigger:"blur"},email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],pwd:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:20,message:"密码应为6-20位",trigger:"blur"}],re_pwd:{validator:function(e,a,n){""===a?n(new Error("请再次输入密码")):a!==t.UserForm.pwd?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}}}},methods:{uploadSuccess:function(t,e,a){0===t.code?this.UserForm.avatar=t.data.avatar:this.$Message.error(t.msg)},regist:function(){var t=this;this.$refs.UserForm.validate(function(e){e&&t.axios.post("/regist",t.UserForm).then(function(e){0===e.data.code?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg)})})}}}},IMJE:function(t,e){},IcnI:function(t,e,a){"use strict";var n=a("7+uW"),r=a("NYxO"),s=a("dAEm");n.default.use(r.a),e.a=new r.a.Store({modules:{userinfo:s.a}})},JFIj:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form",{ref:"UserForm",attrs:{model:t.UserForm,rules:t.rules,"label-width":100}},[a("Form-item",{attrs:{label:"用户头像"}},[a("Upload",{attrs:{action:"/api/upload/image",name:"image","show-upload-list":!1,"on-success":t.uploadSuccess}},[a("div",{staticClass:"upload"},[t.UserForm.avatar?a("img",{attrs:{src:"/"+t.UserForm.avatar,alt:""}}):[a("Icon",{attrs:{type:"ios-cloud-upload-outline"}}),t._v("\n                            上传头像\n\n                        ")]],2)])],1),t._v(" "),a("Form-item",{attrs:{label:"用户名",prop:"username"}},[a("Input",{staticClass:"middle-input",attrs:{placeholder:"请输入用户名"},model:{value:t.UserForm.username,callback:function(e){t.UserForm.username=e},expression:"UserForm.username"}})],1),t._v(" "),a("Form-item",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{staticClass:"middle-input",attrs:{placeholder:"请输入邮箱"},model:{value:t.UserForm.email,callback:function(e){t.UserForm.email=e},expression:"UserForm.email"}})],1),t._v(" "),a("Form-item",{attrs:{label:"密码",prop:"pwd"}},[a("Input",{staticClass:"middle-input",attrs:{type:"password",placeholder:"请输入用户密码"},model:{value:t.UserForm.pwd,callback:function(e){t.UserForm.pwd=e},expression:"UserForm.pwd"}})],1),t._v(" "),a("Form-item",{attrs:{label:"再次输入密码",prop:"re_pwd",required:!0}},[a("Input",{staticClass:"middle-input",attrs:{type:"password",placeholder:"再次输入密码"},model:{value:t.UserForm.re_pwd,callback:function(e){t.UserForm.re_pwd=e},expression:"UserForm.re_pwd"}})],1),t._v(" "),a("Form-item",{attrs:{label:"用户类型"}},[a("span",[t._v("普通用户")])]),t._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:t.regist}},[t._v("确认注册")])],1)],1)],1)],1)},r=[],s={render:n,staticRenderFns:r};e.a=s},L99s:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("router-view")},r=[],s={render:n,staticRenderFns:r};e.a=s},M8HU:function(t,e,a){"use strict";var n=a("Nooo");e.a=n.a},M93x:function(t,e,a){"use strict";var n=a("xJD8"),r=a("L99s"),s=a("VU/8"),o=s(n.a,r.a,null,null,null);e.a=o.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),r=a("M93x"),s=a("YaEn"),o=a("Y81h"),i=a.n(o),c=a("UVIz"),u=(a.n(c),a("IcnI")),l=a("BTaQ"),d=a.n(l),m=a("uMhA");a.n(m),a("cJ47");n.default.use(d.a),n.default.config.productionTip=!1,s.a.beforeEach(function(t,e,a){window.scroll(0,0),i.a.start();var n=u.a.state.userinfo.userinfo;n.token||"/sign"===t.path?n.token&&"/sign"===t.path?(i.a.done(),a("/")):a():a("/sign"),a()}),s.a.afterEach(function(){i.a.done()}),window.vm=new n.default({el:"#app",router:s.a,store:u.a,template:"<App/>",components:{App:r.a}})},Nooo:function(t,e,a){"use strict";function n(t){a("IMJE")}var r=a("I/Af"),s=a("JFIj"),o=a("VU/8"),i=n,c=o(r.a,s.a,i,null,null);e.a=c.exports},Nu8K:function(t,e){},OVI6:function(t,e,a){"use strict";a("C9O2");e.a={name:"Login",data:function(){var t=this;return{loginForm:{username:"",password:""},rules:{username:{validator:function(e,a,n){""===a?(t.usernameError="用户名或邮箱不能为空",n(new Error)):(t.usernameError="",n())},trigger:"blur"},password:{validator:function(e,a,n){""===a?(t.passwordError="密码不能为空",n(new Error)):(t.passwordError="",n())},trigger:"blur"}},usernameError:"",passwordError:"",captchaStatus:!0,captcha:{}}},methods:{getCaptchas:function(){var t=this;this.axios.get("/captchas/new").then(function(e){initGeetest({gt:e.data.data.gt,challenge:e.data.data.challenge,offline:!e.data.data.success,new_captcha:e.data.data.new_captcha,product:"float"},function(e){t.captcha=e,e.appendTo("#captcha"),e.onReady(function(){t.captchaStatus=!1})})})},login:function(){var t=this;this.$refs.loginForm.validate(function(e){if(e){var a=t.captcha.getValidate();a?t.axios.post("/login",{geetest_challenge:a.geetest_challenge,geetest_validate:a.geetest_validate,geetest_seccode:a.geetest_seccode,username:t.loginForm.username,password:t.loginForm.password}).then(function(e){0===e.data.code?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg)}):t.$Message.error("验证码错误")}})}},mounted:function(){this.getCaptchas()}}},QGYt:function(t,e,a){"use strict";e.a={name:"UserList",data:function(){return{columns:[{type:"index",width:80,align:"center"},{title:"用户名",align:"center",key:"username"},{title:"邮箱",align:"center",key:"email",width:180},{title:"头像",align:"center",render:function(t,e){return t("img",{attrs:{src:"/"+e.row.avatar},class:{avatar:!0}})}},{title:"注册时间",align:"center",key:"create_at",width:150},{title:"用户类型",align:"center",render:function(t,e){var a=void 0;switch(e.row.type){case 1:a="普通用户";break;case 2:a="管理员"}return t("span",a)}},{title:"用户状态",align:"center",render:function(t,e){var a=void 0;switch(e.row.status){case 0:a="正常";break;case-1:a="禁止登录"}return t("span",a)}},{title:"操作",align:"center",fixed:"right",render:function(t,e){var a=void 0;switch(e.row.status){case 0:a=t("Button",{props:{type:"error"}},"禁止登录");break;case-1:a=t("Button",{props:{type:"success"}},"允许登录")}return a}}],data:[{name:"2324"}]}},methods:{getUserList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.axios.get("/admin/user",{page:e}).then(function(e){0===e.data.code&&(t.data=e.data.data,console.log(t.data))})}},mounted:function(){this.getUserList()}}},SH3H:function(t,e,a){"use strict";var n=a("QGYt");e.a=n.a},SXQ9:function(t,e,a){"use strict";function n(t){a("qNDs")}var r=a("sb8z"),s=a("W65T"),o=a("VU/8"),i=n,c=o(r.a,s.a,i,null,null);e.a=c.exports},TB72:function(t,e,a){"use strict";var n=a("eeqn");e.a={User:n.a}},UEXc:function(t,e,a){"use strict";var n=a("lbHh"),r=a.n(n);e.a={name:"content",data:function(){return{}},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then(function(){r.a.remove("userinfo"),t.$router.push("/login")})},changeLeftMenu:function(t){this.$router.push(t)}}}},UVIz:function(t,e){},W65T:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"sign-wrapper"},[a("div",{attrs:{id:"particles-js"}}),t._v(" "),a("div",{staticClass:"sign-dialog"},[a("Tabs",{attrs:{value:t.tabName}},[a("TabPane",{attrs:{label:"登录",name:"login"}},[a("Login")],1),t._v(" "),a("TabPane",{attrs:{label:"注册",name:"regist"}},[t._v("注册")])],1)],1)])},r=[],s={render:n,staticRenderFns:r};e.a=s},YaEn:function(t,e,a){"use strict";var n=a("7+uW"),r=a("/ocq"),s=a("bGai"),o=a("Aggl");n.default.use(r.a),e.a=new r.a({routes:[{path:"/",redirect:"/user",hidden:!0,component:function(t){t(s.a.Content)}},{path:"/sign",hidden:!0,component:function(t){t(s.a.Sign)}}].concat(o.a)})},bGai:function(t,e,a){"use strict";var n=a("n2Dr"),r=a("dmPL");e.a={Sign:n.a,Content:r.a}},cJ47:function(t,e,a){"use strict";var n=a("7+uW"),r=a("mtWM"),s=a.n(r),o=a("Rf8U"),i=a.n(o),c=a("Y81h"),u=a.n(c),l=a("mw3O"),d=a.n(l),m=a("lbHh"),p=a.n(m);n.default.use(i.a,s.a),s.a.defaults.baseURL="/api";var f=p.a.getJSON("userinfo")||{};f.token&&(s.a.defaults.headers.common.Authorization=f.token),s.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",s.a.defaults.transformRequest=function(t){return u.a.start(),d.a.stringify(t)},s.a.defaults.transformResponse=function(t){return u.a.done(),t=JSON.parse(t),3e3===t.code&&(window.vm.$Message.error(t.msg),window.vm.$store.dispatch("logout"),window.vm.$router.push("/login")),t}},dAEm:function(t,e,a){"use strict";var n,r=a("bOdI"),s=a.n(r),o=a("//Fk"),i=a.n(o),c=a("lbHh"),u=a.n(c),l=a("Du/2"),d=a("mtWM"),m=a.n(d),p={userinfo:u.a.getJSON("userinfo")||{}},f={logout:function(t){var e=t.commit;return new i.a(function(t,a){e(l.a),t()})},update_userinfo:function(t){var e=t.commit;return new i.a(function(t,a){e(l.b),t()})}},g=(n={},s()(n,l.a,function(t){t.userinfo={}}),s()(n,l.b,function(t){t.userinfo=u.a.getJSON("userinfo")||{},m.a.defaults.headers.common.Authorization=t.userinfo.token}),n);e.a={state:p,actions:f,mutations:g}},dmPL:function(t,e,a){"use strict";var n=a("EOfN");e.a=n.a},eeqn:function(t,e,a){"use strict";var n=a("M8HU"),r=a("0keg");e.a={Add:n.a,List:r.a}},lcyz:function(t,e){},miib:function(t,e,a){"use strict";function n(t){a("tkGf")}var r=a("OVI6"),s=a("FGk3"),o=a("VU/8"),i=n,c=o(r.a,s.a,i,null,null);e.a=c.exports},n2Dr:function(t,e,a){"use strict";var n=a("SXQ9");e.a=n.a},qNDs:function(t,e){},sb8z:function(t,e,a){"use strict";var n=a("JAHf"),r=(a.n(n),a("zXGS")),s=a.n(r),o=a("9ixZ");e.a={name:"Sign",data:function(){return{tabName:"login"}},methods:{login:function(){var t=this;this.pwdError="",this.usernameError="",this.$refs.loginForm.validate(function(e){e&&t.axios.post("/admin/login",t.loginForm).then(function(e){0===e.data.code?(t.$Message.success(e.data.msg),t.$store.dispatch("update_userinfo"),t.$router.push("/")):2001===e.data.code?t.pwdError=e.data.msg:t.usernameError=e.data.msg})})}},mounted:function(){particlesJS("particles-js",s.a)},components:{Login:o.a}}},tkGf:function(t,e){},uMhA:function(t,e){},xJD8:function(t,e,a){"use strict";e.a={name:"app"}},zXGS:function(t,e){t.exports={particles:{number:{value:30,density:{enable:!1,value_area:10}},color:{value:"#bbbec4"},shape:{type:"circle",stroke:{width:0,color:"#bbbec4"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.1,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:6,random:!0,anim:{enable:!1,speed:80,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:200,color:"#bbbec4",opacity:.4,width:2},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:800,line_linked:{opacity:1}},bubble:{distance:800,size:80,duration:2,opacity:.8,speed:3},repulse:{distance:400,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}}},["NHnr"]);
//# sourceMappingURL=app.2b2d302620e6f45472b9.js.map