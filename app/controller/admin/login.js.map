{
    "version": 3,
    "sources": [
        "../../../src/controller/admin/login.js"
    ],
    "names": [
        "Base",
        "require",
        "module",
        "exports",
        "indexAction",
        "username",
        "post",
        "password",
        "userService",
        "service",
        "user",
        "getAdminByUsername",
        "fail",
        "think",
        "md5",
        "tokenController",
        "controller",
        "token",
        "newToken",
        "success"
    ],
    "mappings": ";;AAAA,MAAMA,OAAOC,QAAQ,YAAR,CAAb;;AAEAC,OAAOC,OAAP,GAAiB,cAAcH,IAAd,CAAmB;AAC1BI,eAAN,GAAoB;AAAA;;AAAA;AAChB,gBAAIC,WAAW,MAAKC,IAAL,CAAU,UAAV,CAAf;AACA,gBAAIC,WAAW,MAAKD,IAAL,CAAU,UAAV,CAAf;AACA,gBAAIE,cAAc,MAAKC,OAAL,CAAa,MAAb,CAAlB;AACA,gBAAIC,OAAO,MAAMF,YAAYG,kBAAZ,CAA+BN,QAA/B,CAAjB;AACA,gBAAI,CAACK,KAAKL,QAAV,EAAoB;AAChB,uBAAO,MAAKO,IAAL,CAAU,IAAV,EAAgB,OAAhB,CAAP;AACH;AACDL,uBAAWM,MAAMC,GAAN,CAAUP,QAAV,CAAX;AACA,gBAAIA,aAAaG,KAAKH,QAAtB,EAAgC;AAC5B,uBAAO,MAAKK,IAAL,CAAU,IAAV,EAAgB,MAAhB,CAAP;AACH;AACD,gBAAIG,kBAAkB,MAAKC,UAAL,CAAgB,OAAhB,CAAtB;AACA,gBAAIC,QAAQ,MAAMF,gBAAgBG,QAAhB,CAAyBR,IAAzB,CAAlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAO,MAAKS,OAAL,CAAa,EAACF,OAAOA,KAAR,EAAb,EAA6B,MAA7B,CAAP;AAxBgB;AAyBnB;AA1B+B,CAApC",
    "file": "../../../src/controller/admin/login.js",
    "sourcesContent": [
        "const Base = require('../base.js');\n\nmodule.exports = class extends Base {\n    async indexAction() {\n        let username = this.post('username');\n        let password = this.post('password');\n        let userService = this.service('user');\n        let user = await userService.getAdminByUsername(username);\n        if (!user.username) {\n            return this.fail(2000, '用户不存在');\n        }\n        password = think.md5(password);\n        if (password !== user.password) {\n            return this.fail(2001, '密码错误');\n        }\n        let tokenController = this.controller('token');\n        let token = await tokenController.newToken(user);\n        // let tokenData = {\n        //     username: user.username,\n        //     email: user.email,\n        //     user_ID: user.id\n        // };\n        // tokenData = JSON.stringify(tokenData);\n        // tokenData = think.md5(tokenData);\n        // let token = jwt.sign({ data: tokenData}, 'Jeremy');\n        // let tokenService = this.service('token');\n        // let result = await tokenService.saveToken(token, user.id);\n        return this.success({token: token}, '登录成功');\n    }\n};\n"
    ]
}