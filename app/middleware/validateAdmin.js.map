{
    "version": 3,
    "sources": [
        "../../src/middleware/validateAdmin.js"
    ],
    "names": [
        "module",
        "exports",
        "options",
        "app",
        "ctx",
        "next",
        "token",
        "headers",
        "authorization",
        "url",
        "indexOf",
        "fail",
        "user",
        "id",
        "type"
    ],
    "mappings": ";;AAAAA,OAAOC,OAAP,GAAiB,CAACC,OAAD,EAAUC,GAAV,KAAkB;AAC/B;AAAA,qCAAO,WAAOC,GAAP,EAAYC,IAAZ,EAAqB;AACxB,gBAAIC,QAAQF,IAAIG,OAAJ,CAAYC,aAAxB;AACA,gBAAIF,UAAU,WAAV,IAAyB,CAACA,KAAD,IAAUF,IAAIK,GAAJ,CAAQC,OAAR,CAAgB,QAAhB,IAA4B,CAAtC,IAA2CN,IAAIK,GAAJ,CAAQC,OAAR,CAAgB,SAAhB,IAA6B,CAArG,EAAwG;AACpG,uBAAON,IAAIO,IAAJ,CAAS,IAAT,EAAe,KAAf,CAAP;AACH;AACD,gBAAIC,OAAOR,IAAIQ,IAAJ,IAAY,EAAvB;AACA,gBAAI,CAACA,KAAKC,EAAV,EAAc,OAAOT,IAAIO,IAAJ,CAAS,IAAT,EAAe,KAAf,CAAP;AACd,gBAAIP,IAAIK,GAAJ,CAAQC,OAAR,CAAgB,QAAhB,KAA6B,CAA7B,IAAkCE,KAAKE,IAAL,GAAY,CAAlD,EAAqD;AACjD;AACA,uBAAOV,IAAIO,IAAJ,CAAS,IAAT,EAAe,KAAf,CAAP;AACH;AACD,mBAAON,MAAP;AACH,SAZD;;AAAA;AAAA;AAAA;AAAA;AAaH,CAdD",
    "file": "../../src/middleware/validateAdmin.js",
    "sourcesContent": [
        "module.exports = (options, app) => {\n    return async (ctx, next) => {\n        let token = ctx.headers.authorization;\n        if (token === 'undefined' || !token && ctx.url.indexOf('/login') < 0 && ctx.url.indexOf('/regist') < 0) {\n            return ctx.fail(3000, '未登录');\n        }\n        let user = ctx.user || {};\n        if (!user.id) return ctx.fail(3000, '未登录')\n        if (ctx.url.indexOf('/admin') >= 0 && user.type < 2) {\n            // 无权限访问后台接口\n            return ctx.fail(3000, '未登录')\n        }\n        return next();\n    };\n};\n"
    ]
}